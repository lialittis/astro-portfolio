import{t as C,o as S,q as j,u as A,v as F,b as K,i as k}from"./stagger.es.B1aIIWq_.js";function B(e,t){return t?e*(1e3/t):0}const O=5;function x(e,t,s){const i=Math.max(t-O,0);return B(s-e(i),t-i)}const T={stiffness:100,damping:10,mass:1},E=(e=T.stiffness,t=T.damping,s=T.mass)=>t/(2*Math.sqrt(e*s));function P(e,t,s){return e<t&&s>=t||e>t&&s<=t}const U=({stiffness:e=T.stiffness,damping:t=T.damping,mass:s=T.mass,from:i=0,to:r=1,velocity:o=0,restSpeed:n,restDistance:d}={})=>{o=o?C.s(o):0;const c={done:!1,hasReachedTarget:!1,current:i,target:r},u=r-i,a=Math.sqrt(e/s)/1e3,f=E(e,t,s),h=Math.abs(u)<5;n||(n=h?.01:2),d||(d=h?.005:.5);let g;if(f<1){const l=a*Math.sqrt(1-f*f);g=p=>r-Math.exp(-f*a*p)*((-o+f*a*u)/l*Math.sin(l*p)+u*Math.cos(l*p))}else g=l=>r-Math.exp(-a*l)*(u+(-o+a*u)*l);return l=>{c.current=g(l);const p=l===0?o:x(g,l,c.current),v=Math.abs(p)<=n,m=Math.abs(r-c.current)<=d;return c.done=v&&m,c.hasReachedTarget=P(i,r,c.current),c}},w=10,W=1e4;function z(e,t=S){let s,i=w,r=e(0);const o=[t(r.current)];for(;!r.done&&i<W;)r=e(i),o.push(t(r.done?r.target:r.current)),s===void 0&&r.hasReachedTarget&&(s=i),i+=w;const n=i-w;return o.length===1&&o.push(r.current),{keyframes:o,duration:n/1e3,overshootDuration:(s??n)/1e3}}function D(e){return k(e)&&!isNaN(e)}function G(e){return K(e)?parseFloat(e):e}function H(e){const t=new WeakMap;return(s={})=>{const i=new Map,r=(n=0,d=100,c=0,u=!1)=>{const a=`${n}-${d}-${c}-${u}`;return i.has(a)||i.set(a,e(Object.assign({from:n,to:d,velocity:c},s))),i.get(a)},o=(n,d)=>(t.has(n)||t.set(n,z(n,d)),t.get(n));return{createAnimation:(n,d=!0,c,u,a)=>{let f,h,g,l=0,p=S;const v=n.length;if(d){p=j(n,u?A.get(F(u)):void 0);const m=n[v-1];if(g=G(m),v>1&&n[0]!==null)h=G(n[0]);else{const b=a?.generator;if(b){const{animation:M,generatorStartTime:N}=a,$=M?.startTime||N||0,R=M?.currentTime||performance.now()-$,q=b(R).current;h=q,l=x(y=>b(y).current,R,q)}else c&&(h=G(c()))}}if(D(h)&&D(g)){const m=r(h,g,l,u?.includes("scale"));f=Object.assign(Object.assign({},o(m,p)),{easing:"linear"}),a&&(a.generator=m,a.generatorStartTime=performance.now())}return f||(f={easing:"ease",duration:o(r(0,100)).overshootDuration}),f}}}}const J=H(U);export{J as s};
